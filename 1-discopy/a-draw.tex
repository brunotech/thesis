%!TEX root = ms.tex

We reformulate some of the definitions and results from Joyal, Street \cite{JoyalStreet88}.

\begin{definition}
A \emph{topological graph}, also called 1d cell complex, is a tuple $(\Gamma, \Gamma_0, \Gamma_1)$ of a Hausdorff space $\Gamma$ and a closed, discrete subset $\Gamma_0 \sub \Gamma$ of nodes such that $\Gamma - \Gamma_0 = \bigsqcup \Gamma_1$ is the sum of its connected components $\Gamma_1$, called edges, each homeomorphic to an open intervals with boundary in $\Gamma_0$.
\end{definition}

\begin{definition}
A planar graph between two real numbers $a < b$ is a finite topological graph $\Gamma$ embedded in $\bb{R} \times [a, b]$ such that every $x \in \Gamma \cap (\bb{R} \times \set{a, b})$ is a node in $\Gamma_0$ and belongs to the closure of exactly one edge in $\Gamma_1$.
\end{definition}

The points in $\Gamma_0 \cap (\bb{R} \times \set{a, b})$ are called outer nodes,
they are the boundary of the domain and codomain $\mathtt{dom}(\Gamma), \mathtt{cod}(\Gamma) \in \Gamma_1^\star$ of the planar graph $\Gamma$.
The points $f \in \Gamma_0 - (\bb{R} \times \set{a, b})$ are called inner nodes, they have a domain and codomain $\mathtt{dom}(f), \mathtt{cod}(f) \in \Gamma_1^\star$ given by the edges that have $f$ as boundary.
The composition $\Gamma \circ \Gamma'$ and tensor $\Gamma \otimes \Gamma'$ are defined by rescaling and pasting the two planar graphs $\Gamma, \Gamma'$ vertically and horizontally respectively, see \cite[ยง4]{JoyalStreet88}.

A planar graph $\Gamma$ is \emph{progressive}, or recumbent, when the second projection $e \to [a, b]$ is injective for every edge $e \in \Gamma_1$. Progressive planar graphs have no cups or caps.
A progressive planar graph is \emph{generic} when the projection $\Gamma_0 - (\bb{R} \times \set{a, b}) \to (a, b)$ is injective, i.e. there are no two inner nodes at the same height.
A deformation of planar graphs is a continuous map $h : \Gamma \times [0, 1] \to [a, b] \times \bb{R}$ such that 1) for all $t \in [0, 1]$, $h(-, t)$ is an embedding whose image is a planar graph, and 2) for all $x \in \Gamma_0$, if $h(x, t)$ is inner for some $t$ then it is inner for all values of $t \in [0, 1]$.
A deformation of planar graphs is progressive (generic) when for all $t \in [0, 1]$, $h(-, t)$ is progressive (generic).

The induced equivalence relation --- with $\Gamma_0 \sim \Gamma_1$ if and only if there is a deformation $h$ with $h(-, 0) = \Gamma_0$ and $h(-, 1) = \Gamma_1$ --- is a congruence with respect to composition and tensor of planar graphs,
i.e. if $\Gamma_0 \sim \Gamma_1$ and $\Omega_0 \sim \Omega_1$ then $\Gamma_0 \otimes \Omega_0 \sim \Gamma_1 \otimes \Omega_1$ and $\Gamma_0 \circ \Omega_0 \sim \Gamma_1 \circ \Omega_1$.
Furthermore, tensor and composition are associative and they respect the interchange law up to progessive deformation.
Thus, progessive planar graphs up to progessive deformation form a strict monoidal category \cite[Proposition~4]{JoyalStreet88}.

Given a monoidal signature $\Sigma$, a \emph{valuation} $v$ of a planar graph $\Gamma$ is a pair of functions $v_0 : \Gamma_1 \to \Sigma_0$ and $v_1 : \Gamma_0 - (\bb{R} \times \set{a, b}) \to \Sigma_1$ that send edges to objects and inner nodes to arrows, which commute with domain and codomain.
Progressive planar graphs valued in $\Sigma$ (up to progressive deformation) are the free monoidal category \cite[Theorem~5]{JoyalStreet88}.
We conjecture that generic planar graphs up to generic deformation are the free premonoidal category.

From the universal property, we know that the category of progressive planar graph is equivalent to the combinatorial definition of free monoidal categories given in section~\ref{2-monoidal}.
Concretely, this equivalence is witnessed by the following pair of algorithms translating between planar graphs and diagrams.

\vspace{-5pt}
\begin{algorithm}
\SetKwInOut{Input}{Input}\SetKwInOut{Output}{Output}
\Input{A progressive planar graph $\Gamma$}
\Output{\py{Diagram(dom, cod, boxes, offsets)}}
\BlankLine
\DontPrintSemicolon
Compute the connected components $\Gamma_1$ and their boundaries $\Gamma_0$.\;
Order the nodes by height and partition them into $\Gamma_0 = \py{dom} + \py{boxes} + \py{cod}$.\;
Find the start and end points $\Gamma_1 \to (\py{dom} + \py{boxes}) \times (\py{boxes} + \py{cod})$ for each edge, the preimage of this map gives the domain and codomain for each box.\;
Compute $\py{offsets}$ as the number of edges to the left of each box.\;
\caption{read}
\end{algorithm}
\vspace{-22pt}
\begin{algorithm}
\SetKwInOut{Input}{Input}\SetKwInOut{Output}{Output}
\Input{\py{Diagram(dom, cod, boxes, offsets)}}
\Output{A progressive planar graph $\Gamma$}
\BlankLine
\DontPrintSemicolon
Set $\Gamma_0 := \set{(i, 0) \ \vert \ i < \py{len(dom)}}$ and $\Gamma_1 := \emptyset$.\;
\For{\py{height, (box, offset) in enumerate(zip(boxes, offsets))}}{
Deform $\Gamma$ so that there is at least \py{len(box.cod) + 1} horizontal space between the edges of $\mathtt{cod}(\Gamma)$ at index \py{offset} and \py{offset + len(box.dom)}.\label{step-3}\;
Set $\Gamma_0 := \Gamma_0 + \{\py{box}\}$ for $\py{box} = (m, \py{height} +\frac{1}{2})$ with $m$ computed at step~\ref{step-3} and $\Gamma_1 := \Gamma_1 + \{x \to \py{box} \ \vert \ x \in
\py{box.dom}\} + \{\py{box} \to x \ \vert \ x \in
\py{box.cod}\}$.
}
Return $\Gamma := \Gamma + \{(i, j) \to (i, \py{max(len(boxes), 1)}) \ \vert \ (i, j) \in \mathtt{cod}(\Gamma)\}$.
\caption{draw}
\end{algorithm}
